<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>vura.sync.jobs documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Vura</span> <span class="project-version">0.5.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vura</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></div></li><li class="depth-3 branch"><a href="vura.async.jobs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jobs</span></div></a></li><li class="depth-3"><a href="vura.async.scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scheduler</span></div></a></li><li class="depth-2 branch"><a href="vura.core.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="vura.cron.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cron</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>holidays</span></div></div></li><li class="depth-3 branch"><a href="vura.holidays.easter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>easter</span></div></a></li><li class="depth-3"><a href="vura.holidays.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>sync</span></div></div></li><li class="depth-3 branch current"><a href="vura.sync.jobs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jobs</span></div></a></li><li class="depth-3"><a href="vura.sync.scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scheduler</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>timezones</span></div></div></li><li class="depth-3"><a href="vura.timezones.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="vura.sync.jobs.html#var-add-phase"><div class="inner"><span>add-phase</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-defjob"><div class="inner"><span>defjob</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-depend-on"><div class="inner"><span>depend-on</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-insert-phase"><div class="inner"><span>insert-phase</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-job"><div class="inner"><span>job</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-job-life"><div class="inner"><span>job-life</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-JobActions"><div class="inner"><span>JobActions</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-reset-job.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reset-job!</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-start.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>start!</span></div></a></li><li class="depth-2"><a href="vura.sync.jobs.html#var-stop.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stop!</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-JobInfo"><div class="inner"><span>JobInfo</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-active.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>active?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-after-phase.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>after-phase?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-at-phase.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>at-phase?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-before-phase.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>before-phase?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-duration.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duration?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-ended-at.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ended-at?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-finished.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>finished?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-get-phases"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-phases</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-in-error.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>in-error?</span></div></a></li><li class="depth-2 branch"><a href="vura.sync.jobs.html#var-started-at.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>started-at?</span></div></a></li><li class="depth-2"><a href="vura.sync.jobs.html#var-started.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>started?</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-make-job-shell"><div class="inner"><span>make-job-shell</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-remove-phase"><div class="inner"><span>remove-phase</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-reset-jobs"><div class="inner"><span>reset-jobs</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-restart-job.21"><div class="inner"><span>restart-job!</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-restart-jobs"><div class="inner"><span>restart-jobs</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-start-jobs"><div class="inner"><span>start-jobs</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-stop-jobs"><div class="inner"><span>stop-jobs</span></div></a></li><li class="depth-1"><a href="vura.sync.jobs.html#var-wait-for"><div class="inner"><span>wait-for</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">vura.sync.jobs</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-phase"><h3>add-phase</h3><div class="usage"><code>(add-phase job new-phase [function validator])</code></div><div class="doc"><pre class="plaintext">Functions adds phase to the end
of the phase chain that completes
job</pre></div></div><div class="public anchor" id="var-defjob"><h3>defjob</h3><h4 class="type">macro</h4><div class="usage"><code>(defjob name &amp; phases)</code></div><div class="doc"><pre class="plaintext">Defines job shell that represents blueprint for
successively executing functions that are defined
as transitions from phase to phase. Transitions are
valid if validator function returns true or if
validator is not defined.</pre></div></div><div class="public anchor" id="var-depend-on"><h3>depend-on</h3><div class="usage"><code>(depend-on check-timer &amp; jobs)</code></div><div class="doc"><pre class="plaintext">depend-on function is wrapper for job
validator, that ties execution of next
phase to successfull finish of other
jobs.</pre></div></div><div class="public anchor" id="var-insert-phase"><h3>insert-phase</h3><div class="usage"><code>(insert-phase job new-phase at-phase function validator)</code></div><div class="doc"><pre class="plaintext">Inserts new phase after at-phase
</pre></div></div><div class="public anchor" id="var-job"><h3>job</h3><div class="usage"><code>(job j)</code><code>(job j &amp; params)</code></div><div class="doc"><pre class="plaintext">Returns real Job record with life. It
is possible to initialize data for job.
Pass in params after job definition.</pre></div></div><div class="public anchor" id="var-job-life"><h3>job-life</h3><div class="usage"><code>(job-life x)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-JobActions"><h3>JobActions</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-reset-job.21"><h3>reset-job!</h3><div class="usage"><code>(reset-job! this)</code><code>(reset-job! this params)</code></div><div class="doc"><pre class="plaintext">Returns job to initialized state. Optional parameter
params is for data initialization.</pre></div></div><div class="public anchor" id="var-start.21"><h3>start!</h3><div class="usage"><code>(start! this)</code></div><div class="doc"><pre class="plaintext">Starts Job. That is sends-off job-agent to do the job. If Job
was previously stoped than it continues from last phase.</pre></div></div><div class="public anchor" id="var-stop.21"><h3>stop!</h3><div class="usage"><code>(stop! this)</code></div><div class="doc"><pre class="plaintext">Stops running Job. Job will allways try to complete current phase.
If validator doesn't allow execution to continue than Job is stoped
at current phase.</pre></div></div></div></div></div><div class="public anchor" id="var-JobInfo"><h3>JobInfo</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-active.3F"><h3>active?</h3><div class="usage"><code>(active? this)</code></div><div class="doc"><pre class="plaintext">Returns true if job is running
</pre></div></div><div class="public anchor" id="var-after-phase.3F"><h3>after-phase?</h3><div class="usage"><code>(after-phase? this phase)</code></div><div class="doc"><pre class="plaintext">Returns boolean true if current phase that job-agent is working on is before input phase
</pre></div></div><div class="public anchor" id="var-at-phase.3F"><h3>at-phase?</h3><div class="usage"><code>(at-phase? this)</code></div><div class="doc"><pre class="plaintext">Returns current phase that job-agent is working on
</pre></div></div><div class="public anchor" id="var-before-phase.3F"><h3>before-phase?</h3><div class="usage"><code>(before-phase? this phase)</code></div><div class="doc"><pre class="plaintext">Returns boolean true if current phase that job-agent is working on is before input phase
</pre></div></div><div class="public anchor" id="var-duration.3F"><h3>duration?</h3><div class="usage"><code>(duration? this)</code></div><div class="doc"><pre class="plaintext">Returns duration of job in milliseconds
</pre></div></div><div class="public anchor" id="var-ended-at.3F"><h3>ended-at?</h3><div class="usage"><code>(ended-at? this)</code></div><div class="doc"><pre class="plaintext">Returns timestamp
</pre></div></div><div class="public anchor" id="var-finished.3F"><h3>finished?</h3><div class="usage"><code>(finished? this)</code></div><div class="doc"><pre class="plaintext">Returns true is job is in :finished state
</pre></div></div><div class="public anchor" id="var-get-phases"><h3>get-phases</h3><div class="usage"><code>(get-phases this)</code></div><div class="doc"><pre class="plaintext">Lists all Job phases
</pre></div></div><div class="public anchor" id="var-in-error.3F"><h3>in-error?</h3><div class="usage"><code>(in-error? this)</code></div><div class="doc"><pre class="plaintext">Returns error exception if it happend. Otherwise nil
</pre></div></div><div class="public anchor" id="var-started-at.3F"><h3>started-at?</h3><div class="usage"><code>(started-at? this)</code></div><div class="doc"><pre class="plaintext">Returns timestamp
</pre></div></div><div class="public anchor" id="var-started.3F"><h3>started?</h3><div class="usage"><code>(started? thsi)</code></div><div class="doc"><pre class="plaintext">Returns true if job is not in phase start
</pre></div></div></div></div></div><div class="public anchor" id="var-make-job-shell"><h3>make-job-shell</h3><div class="usage"><code>(make-job-shell phases)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-remove-phase"><h3>remove-phase</h3><div class="usage"><code>(remove-phase job phase)</code></div><div class="doc"><pre class="plaintext">Removes phase from job
</pre></div></div><div class="public anchor" id="var-reset-jobs"><h3>reset-jobs</h3><div class="usage"><code>(reset-jobs &amp; jobs)</code></div><div class="doc"><pre class="plaintext">Returns function that takes one parameter
and returns the same parameter. In mean time
it resets all jobs that are put in as jobs
argument of this function</pre></div></div><div class="public anchor" id="var-restart-job.21"><h3>restart-job!</h3><div class="usage"><code>(restart-job! job)</code></div><div class="doc"><pre class="plaintext">Restarts job combining functions stop! restart-job!
start!</pre></div></div><div class="public anchor" id="var-restart-jobs"><h3>restart-jobs</h3><div class="usage"><code>(restart-jobs &amp; jobs)</code></div><div class="doc"><pre class="plaintext">Returns function that takes one parameter
and returns the same parameter. In mean time
it restarts all jobs that are put in as jobs
argument of this function</pre></div></div><div class="public anchor" id="var-start-jobs"><h3>start-jobs</h3><div class="usage"><code>(start-jobs &amp; jobs)</code></div><div class="doc"><pre class="plaintext">Returns function that takes one parameter
and returns the same parameter. In mean time
it starts all jobs that are put in as jobs
argument of this function</pre></div></div><div class="public anchor" id="var-stop-jobs"><h3>stop-jobs</h3><div class="usage"><code>(stop-jobs &amp; jobs)</code></div><div class="doc"><pre class="plaintext">Returns function that takes one parameter
and returns the same parameter. In mean time
it stops all jobs that are put in as jobs
argument of this function</pre></div></div><div class="public anchor" id="var-wait-for"><h3>wait-for</h3><div class="usage"><code>(wait-for check-timer)</code><code>(wait-for check-timer condition)</code></div><div class="doc"><pre class="plaintext">Wait for is another wrapper that can
be used as validator for job. It periodicaly
checks if condition fn or condition is valid
and. If condition is not provided than it is true.</pre></div></div></div></body></html>